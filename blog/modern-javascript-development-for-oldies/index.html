<!doctype html>
<html lang="en">

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta name="description" content="">
        <meta name="author" content="">

        <!--
        <link rel="stylesheet" href="../../static/style.css">
        -->
        <!-- Bootstrap core CSS -->
        <link href="../../vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

        <!-- Custom fonts for this template -->
        <link href="../../vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

        <!-- Custom styles for this template -->
        <link href="../../static/clean-blog.min.css" rel="stylesheet">

        <!-- Pygments - code highlighting styles -->
        <link rel="stylesheet" href="../../static/pygments.css">

        <title>&#34;Modern&#34; Javascript development for oldies â€” miblog</title>
    </head>

    <body>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
        <div class="container">
            <a class="navbar-brand" href="index.html">MIBLOG</a>
            <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                Menu
                <i class="fa fa-bars"></i>
            </button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav ml-auto">
                    
                    <li class="nav-item" endif
                        %}><a class="nav-link" href="../../">Home</a></li>
                    
                    <li class="nav-item" endif
                        %}><a class="nav-link" href="../../blog/">Blog</a></li>
                    
                    <li class="nav-item" endif
                        %}><a class="nav-link" href="../../projects/">Projects</a></li>
                    
                    <li class="nav-item" endif
                        %}><a class="nav-link" href="../../about/">About</a></li>
                    

                </ul>
            </div>
        </div>
    </nav>

    <!-- page header -->
    <header class="masthead" style="background-image: url('../../static/Lake_Hayes_by_queenstown.jpg')">
      <div class="overlay"></div>
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-md-10 mx-auto">
            <div class="site-heading">
              <h1>Miblog</h1>
              <!--
              <span class="subheading">Thoughts and ideas</span>
              -->
            </div>
          </div>
        </div>
      </div>
    </header>

    <!-- TODO: copy boostrap style -->
    <!-- Main Content -->
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
        
  
  <div class="blog-post">
  
    <h2>&#34;Modern&#34; Javascript development for oldies</h2>
  
  <p class="meta">
    written by
    
      <a href="https://twitter.com/@vyskocilm">Michal Vyskocil</a>
    
    on 2018-04-04
  </p>
  
  <h2>My Javascript experience</h2><p>When I started my career, I was working as Junior Developer on web based application. We have had parts written in <a href="https://en.wikipedia.org/wiki/JavaServer_Pages">Java Server Pages</a>, which was great technology combining elegance of PHP with easy to use of Java. We had something in <a href="https://en.wikipedia.org/wiki/Java_servlet">Java servlets</a>, which allows us easier testing and compilation up front. Other parts were in <a href="
https://en.wikipedia.org/wiki/PL/SQL">PL/SQL</a>. And of course, the Javascript.</p>
<p>And most of our clients has been using <a href="https://davidwalsh.name/6-reasons-why-ie6-must-die">Internet Explorer 6</a> at the time! XmlHttpRequest was a neat new thing, jQuery was a hot new technology. The common way to have JS integrated was through session objects, so the logic of application was scattered through several pages (JSPs or Servlets) and it relied on server side rendering heavily.</p>
<p>At that time I decided to <strong>never</strong> touch Javascript at all.</p>
<h2>Fast forward to 2018</h2><p>The world has changed. Browsers are more and more ubiquitous, we got more platforms (TVs, consoles and phones). So if you want to spread your small application to your friends, then web application is the easiest way to do. Fortunately Javascript become more powerful and compatible across browsers. The main shift of paradigm is client side rendering. There is no need to do horrible things like passing session objects and initialize all you JS again and again. You can manage all your state in one place.</p>
<p>And that's not all. With advent of technologies like <a href="http://webassembly.org/">Webassembly</a> and <a href="https://github.com/kripken/emscripten">Emscripten</a> you can have crazy things like <a href="https://github.com/kripken/sql.js">native sqlite</a> database running in your browser. Plus you can offload heavy CPU intensive tasks (like SQL queries) to <a href="https://en.wikipedia.org/wiki/Web_worker">Web worker</a>.</p>
<h2>"Modern" JS development for dummies</h2><p>Of course things are not <em>that</em> easy for dummies. You have <a href="https://nodejs.org/en/">nodejs</a>, <a href="https://www.npmjs.com/">npm</a> package manager (or shall I use <a href="https://yarnpkg.com/en/">yarn</a>?). Should I learn AngularJS, ReactJs, Redux, Webpack, Gulp, Vue.js, Grunt? You can easily fall into the trap of choosing the right tools, frameworks and workflows, spending hours on watching youtube videos and reading documentation, while not implementing a single line.</p>
<p>The thing is - it <strong>does not matter</strong>. Keep it simple, implement first version using technologies you know or you can learn easily and finish it as soon as possible. Then you will encounter problems like deployment, which you can solve using existing technologies. So start with stupid solutions and enhance it over times.</p>
<h2>jQuery</h2><p>First thing - use and learn jQuery. The DOM API (especially old parts like <code>getElementById</code>) is horrible and jQuery have nicer and easier to use API. Plus all you need to use jQuery is to add <code>scr="https://code.jquery.com/jquery-3.3.1.slim.js"</code> to your HTML and it works. You can get nicer looking code with a minimal effort</p>
<pre>
// DOM API
var element = document.getElementById("id");
// jQuery
var element = $("#id");
</pre><p>Sadly there are things jQuery is not compatible with modern API like needed for <code>sql.js</code> like <code>arraybuffer</code> type for <code>XmlHttpRequest</code>. Fortunately you can combine it with native browser APIs  (unlike <a href="https://reactjs.org/docs/integrating-with-other-libraries.html">ReactJS</a> which builds own Virtual DOM). Which is important in case you're junior and exploring the world.</p>
<h2>Avoid nested code</h2><p>For a simple application you'll be building, try to avoid having nested code. If you define function inside function inside callback definition, you're doing something wrong. This is problematic given the fact Javascript is event based and you register callback all around.</p>
<p>The problem I have had was</p>
<p><ol></p>
<li>You need to use <code>XmlHttpRequest</code> to download your database file</li>
<li>THEN you can instantiate database and send first request to worker</li>
<li>THEN is your application ready</li><p>And while this is trivial to write in traditional environment, <code>XmlHttpRequest</code> is asynchronous, so all you know if that you're ready when <em>callback</em> is called.</p>
<pre>
var worker = new Worker ("worker.sql.js");
...
var xhr = new XmlHttpRequest ();

...
xhr.onload = function (event) {
    ...
    worker.postMessage({
        id:id,
        action:'open',
        buffer: uInt8Array,
    });
    // enable execute button, so you can post SQL queries to worker
    $("#execute").removeAttr ("disabled");
}
</pre><p>The most important method is enabling the button after sqlite file is downloaded and first job to worker is sent. For non interactive application, you''ll simply fire some event or call the callback.</p>
<h2>console.log and browser's REPL</h2><p>Can't emphasize how great tool is <code>console.log</code>. It does not work like Python or similar REPL printing strings.  Browser will deal with logged things like with objects, so all the structure become visible to you immediately. This is very powerful tool, especially for novices in the field.</p>
<p>This becomes extremely important when you're dealing with a relatively simple tasks, like how to iterate through <code>Object</code> or <code>Map</code> in the language.</p>
<h2>Kinkip: The result</h2><p>The world of web applications and Javascript programming is way more powerful and developer friendly. I particularly love the move to client side rendering and with WebWorkers, XmlHttpRequest or emscripten and WebAssembly, you have barely no limits in what you can achieve.</p>
<p>The result is <a href="/kinkip/index.html">Kinkip</a>, helper tool for <a href="https://play.google.com/store/apps/details?id=com.apnax.wordsnack.csk&hl=en">Piknik slov - Word Snack</a> game, which allows you to search for a words you can get from given range of characters. It is powered by <a href="https://github.com/kripken/sql.js">sql.js</a> and GNU FDL Czech - English dictionary from <a href="https://www.svobodneslovniky.cz/">svobodneslovniky.cz</a>. The beauty of it is that all operations are done client side. If properly cached, it works completely offline.</p>
<p>The downside is the game is no longer fun to play :-)</p>

  
  </div>


        </div>
      </div>
    </div>

    <hr>

    <!-- footer -->
    <footer>
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-md-10 mx-auto">
            <ul class="list-inline text-center">
              <li class="list-inline-item">
                <a href="mailto:michal.vyskocil@gmail.com">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-mail fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li class="list-inline-item">
                <a href="https://twitter.com/vyskocilm">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li class="list-inline-item">
                <a href="https://github.com/vyskocilm">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li class="list-inline-item">
                <a href="https://www.facebook.com/michal.vyskocil.148">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
            </ul>
            <p class="copyright text-muted">Copyright &copy; Michal Vyskocil 2018.<br/>Based on <a href="https://startbootstrap.com/template-overviews/clean-blog/">Bootstrap Clean Blog</a>, powered by <a href="https://getlektor.com">Lektor SCM</a></p>
          </div>
        </div>
      </div>
    </footer>

    <!-- Bootstrap core JavaScript -->
    <script src="../../vendor/jquery/jquery.min.js"></script>
    <script src="../../vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Custom scripts for this template -->
    <script src="../../static/clean-blog.min.js"></script>
    </body>

</html>
